<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>HTML ë¸”ë¡ ì½”ë”©</title>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <style>
    body { display: flex; height: 100vh; margin: 0; font-family: Arial, sans-serif; }
    .panel { flex: 1; padding: 10px; box-sizing: border-box; border-right: 1px solid #ccc; overflow: auto; }
    .panel:last-child { border-right: none; }
    h2 { margin-top: 0; }
    button { display: block; margin: 5px 0; padding: 8px; background: #ff7f50; color: white; border: none; border-radius: 5px; cursor: pointer; }
    textarea { width: 100%; height: 85%; font-family: monospace; font-size: 14px; }
    iframe { width: 100%; height: 70%; border: 1px solid #ccc; background: white; }
    #screenshot { margin-top: 10px; max-width: 100%; border: 1px solid #ccc; }
  </style>
</head>
<body>

  <!-- 1ë²ˆ: ë¸”ë¡ ë²„íŠ¼ ì˜ì—­ -->
  <div class="panel">
    <h2>ë¸”ë¡ ì„ íƒ</h2>
    <button onclick="addBlock('title')">ì œëª©</button>
    <button onclick="addBlock('subtitle')">ì†Œì œëª©</button>
    <button onclick="addBlock('paragraph')">ë³¸ë¬¸</button>
    <button onclick="addBlock('styleHeader')">ìŠ¤íƒ€ì¼-í—¤ë”</button>
    <button onclick="addBlock('styleBody')">ìŠ¤íƒ€ì¼-ë³¸ë¬¸</button>
    <button onclick="addBlock('styleBox')">ìŠ¤íƒ€ì¼-ë°•ìŠ¤</button>
  </div>

  <!-- 2ë²ˆ: ì½”ë“œ ì˜ì—­ -->
  <div class="panel">
    <h2>ì½”ë“œ</h2>
    <textarea id="codeArea">
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
</head>
<body>
</body>
</html>
    </textarea>
    <button onclick="runCode()">â–¶ ì‹¤í–‰</button>
    <button onclick="capture()">ğŸ“¸ ìº¡ì²˜</button>
  </div>

  <!-- 3ë²ˆ: ë¯¸ë¦¬ë³´ê¸° -->
  <div class="panel">
    <h2>ê²°ê³¼</h2>
    <iframe id="preview"></iframe>
    <h3>ì •ì  ìŠ¤í¬ë¦°ìƒ·</h3>
    <img id="screenshot" alt="ìº¡ì²˜ëœ ì´ë¯¸ì§€ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.">
  </div>

<script>
  const blocks = {
    title: `<title>ìê¸°ì†Œê°œ í˜ì´ì§€</title>`,
    subtitle: `<h2>ì†Œì œëª© ì˜ˆì‹œ</h2>`,
    paragraph: `<p>ì´ê²ƒì€ ë³¸ë¬¸ ë‚´ìš©ì…ë‹ˆë‹¤.</p>`,
    styleHeader: `header { background-color: #ffdab9; padding: 20px; text-align: center; }
main { padding: 20px; }`,
    styleBody: `body { font-family: Arial, sans-serif; background-color: #faf0e6; }`,
    styleBox: `.box { background-color: #ffe4e1; padding: 15px; margin: 10px 0; border-radius: 10px; }`
  };

  function addBlock(type) {
    let textarea = document.getElementById("codeArea");
    let code = textarea.value;

    // ìŠ¤íƒ€ì¼ì€ <style> íƒœê·¸ ì•ˆì—, ë‚˜ë¨¸ì§€ëŠ” body/headì— ìë™ ì‚½ì…
    if (type.startsWith("style")) {
      if (!code.includes("<style>")) {
        code = code.replace("</head>", "  <style>\n  </style>\n</head>");
      }
      code = code.replace("</style>", "  " + blocks[type] + "\n</style>");
    } else if (type === "title") {
      if (!code.includes("<title>")) {
        code = code.replace("<meta charset=\"UTF-8\">", `<meta charset="UTF-8">\n  ${blocks[type]}`);
      }
    } else {
      code = code.replace("</body>", "  " + blocks[type] + "\n</body>");
    }

    textarea.value = code;
  }

  function runCode() {
    let code = document.getElementById("codeArea").value;
    let iframe = document.getElementById("preview");
    iframe.srcdoc = code;
  }

  function capture() {
    let iframe = document.getElementById("preview");
    let iframeDoc = iframe.contentDocument || iframe.contentWindow.document;

    html2canvas(iframeDoc.body).then(canvas => {
      let img = document.getElementById("screenshot");
      img.src = canvas.toDataURL("image/png");
    });
  }
</script>

</body>
</html>
