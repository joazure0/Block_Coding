<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>HTML 블록 코딩 - 시각 예제</title>
  <style>
    body { display: flex; height: 100vh; margin: 0; font-family: Arial, sans-serif; }
    .panel { flex: 1; padding: 10px; box-sizing: border-box; border-right: 1px solid #ccc; overflow: auto; }
    .panel:last-child { border-right: none; }
    h2 { margin-top: 0; }
    button { display: block; margin: 5px 0; padding: 8px; background: #ff7f50; color: white; border: none; border-radius: 5px; cursor: pointer; }
    textarea { width: 100%; height: 75%; font-family: monospace; font-size: 14px; }
    iframe { width: 100%; height: 85%; border: 1px solid #ccc; background: white; }
    header { background-color: #ffdab9; padding: 20px; text-align: center; border-radius: 10px; margin-bottom: 10px; }
    main { padding: 20px; }
    .box { background-color: #ffe4e1; padding: 15px; margin: 10px 0; border-radius: 10px; }
  </style>
</head>
<body>

  <!-- 1번: 블록 버튼 영역 -->
  <div class="panel">
    <h2>블록 선택</h2>
    <button onclick="addBlock('title')">제목</button>
    <button onclick="addBlock('subtitle1')">소제목 1</button>
    <button onclick="addBlock('subtitle2')">소제목 2</button>
    <button onclick="addBlock('paragraph1')">본문 1</button>
    <button onclick="addBlock('paragraph2')">본문 2</button>
    <button onclick="addBlock('styleHeader')">스타일-헤더</button>
    <button onclick="addBlock('styleBody')">스타일-본문</button>
    <button onclick="addBlock('styleBox')">스타일-박스</button>
  </div>

  <!-- 2번: 코드 영역 -->
  <div class="panel">
    <h2>코드</h2>
    <textarea id="codeArea">
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
</head>
<body>
</body>
</html>
    </textarea>
    <button onclick="runCode()">▶ 실행</button>
    <button onclick="resetCode()">♻ 초기화</button>
  </div>

  <!-- 3번: 미리보기 -->
  <div class="panel">
    <h2>결과</h2>
    <iframe id="preview"></iframe>
  </div>

<script>
  // 블록별 코드 정의
  const blocks = {
    title: `<title>나의 자기소개 페이지</title>`,
    subtitle1: `<h2>나의 소개</h2>`,
    subtitle2: `<h2>취미와 관심사</h2>`,
    paragraph1: `<p>안녕하세요! 저는 중학생 디지털 튜터 수업용 페이지를 만들어보고 있어요.</p>`,
    paragraph2: `<p>취미는 코딩과 그림 그리기이며, 미래에는 웹 개발자가 되고 싶습니다.</p>`,
    styleHeader: `header { background-color: #ffdab9; padding: 20px; text-align: center; border-radius: 10px; margin-bottom: 10px; }
main { padding: 20px; }`,
    styleBody: `body { font-family: Arial, sans-serif; background-color: #faf0e6; }`,
    styleBox: `.box { background-color: #ffe4e1; padding: 15px; margin: 10px 0; border-radius: 10px; }`
  };

  const defaultCode = `<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
</head>
<body>
</body>
</html>`;

  // 블록 클릭 시 코드 삽입
  function addBlock(type) {
    let textarea = document.getElementById("codeArea");
    let code = textarea.value;

    if (type.startsWith("style")) {
      if (!code.includes("<style>")) {
        code = code.replace("</head>", "  <style>\n  </style>\n</head>");
      }
      code = code.replace("</style>", "  " + blocks[type] + "\n</style>");
    } else if (type === "title") {
      if (!code.includes("<title>")) {
        code = code.replace("<meta charset=\"UTF-8\">", `<meta charset="UTF-8">\n  ${blocks[type]}`);
      }
    } else {
      // 소제목/본문 등은 body 닫히기 전에 추가
      code = code.replace("</body>", "  " + blocks[type] + "\n</body>");
    }

    textarea.value = code;
  }

  // 실행 버튼
  function runCode() {
    let code = document.getElementById("codeArea").value;
    let iframe = document.getElementById("preview");
    iframe.srcdoc = code;
  }

  // 초기화 버튼
  function resetCode() {
    document.getElementById("codeArea").value = defaultCode;
    document.getElementById("preview").srcdoc = defaultCode;
  }
</script>

</body>
</html>
